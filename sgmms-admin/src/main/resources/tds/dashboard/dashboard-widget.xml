<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"
	xmlns="http://www.springframework.org/schema/beans">
	
	<bean id="tagCSS" class="java.lang.String">
		<constructor-arg index="0">
			<value><![CDATA[  <link rel="stylesheet" type="text/css" href="${ctx}/${cssFilePath}">]]></value>
		</constructor-arg>
	</bean>
	
	<bean id="tagJS" class="java.lang.String">
		<constructor-arg index="0">
			<value><![CDATA[<script type="text/javascript" src="${ctx}/${jsFilePath}"></script>]]></value>
		</constructor-arg>
	</bean>
	
	<bean id="buttonBody" class="java.lang.String">
		<constructor-arg index="0">
			<value><![CDATA[<button type="button" class="btn ${type} btn-sm" onclick="${onClick}">${title}</button>]]></value>
		</constructor-arg>
	</bean>
	
	<bean id="dropdownMenuBody" class="java.lang.String">
		<constructor-arg index="0">
			<value>
				<![CDATA[
					<div class="btn-group">
						<button type="button" class="btn btn-default dropdown-toggle btn-sm" data-toggle="dropdown">${title}
							<span class="caret"></span>
						</button>
						<ul class="dropdown-menu pull-right" style="right:0;left:">
							${dropdownMenus}
						</ul>
					</div>
				]]>
			</value>
		</constructor-arg>
	</bean>
	
	<bean id="menuBody" class="java.lang.String">
		<constructor-arg index="0">
			<value><![CDATA[<li><a onclick="${onClick}">${title}</a></li>]]></value>
		</constructor-arg>
	</bean>
	
	<bean id="widgetVo" class="com.tisson.tds.dashboard.web.vo.WidgetVo" scope="prototype">
		<property name="widgetContext">
			<value><![CDATA[['<li id="li_${id}">'+$('#${id}').html()+'</li>', ${sizex}, ${sizey}<#if (col>0)&&(row>0)>,${col},${row}</#if>]]]></value>
		</property>
		<property name="sizeX" value="2" />
		<property name="sizeY" value="2" />
		<property name="row" value="0" />
		<property name="col" value="0" />
	</bean>
	
	<bean id="panelWidget" class="com.tisson.tds.dashboard.web.vo.PanelWidget" parent="widgetVo" scope="prototype">
		<property name="panelContext">
			<value>
				<![CDATA[
					<div id="${id}"  style="display:none;z-index:-100">
						<div class="panel panel-default" style="height:100%">
							${panelHeading}
							${panelBody}
							${panelFooter}
						</div>
					</div>
				]]>
			</value>
		</property>
		<property name="panelHeading">
			<value>
				<![CDATA[
					<div class="panel-heading" style="height:40px">
						<h3 class="panel-title">${title}</h3>
						<div class="btn-group pull-right" style="top:-19px;">
							${buttons}
						</div>
					</div>
				]]>
			</value>
		</property>
		<property name="panelBody">
			<value>
				<![CDATA[
					<div class="panel-body" style=" position: absolute;right:2px;left:2px;top:40px;bottom:${bottomOffset}px;">
						${bodyContext}
					</div>
				]]>
			</value>
		</property>
		<property name="panelFooter">
			<value>
				<![CDATA[
					<div class="panel-footer" style="position: absolute;right:2px;left:2px;bottom:2px;">
						<div class="btn-group" style="float:right;top:-23px;vertical-align:top;">
							${buttons}
						</div>
					</div>
				]]>
			</value>
		</property>
	</bean>
	
	<bean id="textPanelWidget" class="com.tisson.tds.dashboard.web.vo.TextPanelWidget" parent="panelWidget" scope="prototype"></bean>
	
	<bean id="pieChartPanelWidget" class="com.tisson.tds.dashboard.web.vo.chart.PieChartPanelWidget" parent="panelWidget" scope="prototype">
		<property name="sysJS">
			<list>
				<value>tds/static/dashboard/echarts/dist/echarts-all.js</value>
			</list>
		</property>
		<property name="bodyContext">
			<value>
				<![CDATA[<div id="${chartId}" style="height:100%"></div>]]></value>
		</property>
	</bean>
	
	<bean id="barChartPanelWidget" class="com.tisson.tds.dashboard.web.vo.chart.BarChartPanelWidget" parent="panelWidget" scope="prototype">
		<property name="sysJS">
			<list>
				<value>tds/static/dashboard/echarts/dist/echarts-all.js</value>
			</list>
		</property>
		<property name="bodyContext">
			<value><![CDATA[<div id="${chartId}" style="height:100%"></div>]]></value>
		</property>
		<property name="initEndJS">
			<value>
				<![CDATA[
					var jq${chartId} = echarts.init(document.getElementById('${chartId}'));
					var ${chartId}Option = {
							tooltip: {show: true},
							toolbox: {show : true, feature : {
							magicType : {show: true, type: ['line', 'bar']},
							restore : {show: true},
							saveAsImage : {show: true}
						}},
						xAxis : [{type : 'category',data : [${chartXAxisNames}]}],
						yAxis : [{type : 'value'}],
						series : [${series}]
						};
					jq${chartId}.setOption(${chartId}Option);
				]]>
			</value>
		</property>
		<property name="seriesBody">
			<value><![CDATA[{"name":"${seriesCaption}","type":"bar","data":[${seriesValues}]}]]></value>
		</property>
	</bean>
	
	<bean id="userChart" class="com.tisson.tds.dashboard.web.vo.chart.SqlBarChart" parent="barChartPanelWidget" scope="prototype">
		<property name="id" value="orgWidget" />
		<property name="title">
			<value><![CDATA[${i18n("tds.db.userChart.title")}]]></value>
		</property>
		<property name="chartId" value="userChart" />
		<property name="xAxisFieldName" value="name" />
		<property name="sql" value="select t.usertype as id, count(*) as count from BAF_ORG_USER t group by t.usertype" />
		<property name="serieses">
			<list>
				<bean class="com.tisson.tds.dashboard.web.vo.chart.ChartSeries">
					<property name="caption">
						<value><![CDATA[${i18n("tds.db.userChart.chartCaption")}]]></value>
					</property>
					<property name="fieldName" value="count" />
				</bean>
			</list>
		</property>
		<property name="headingButtons">
			<list>
				<bean class="com.tisson.tds.dashboard.web.vo.Button">
					<property name="title">
						<value><![CDATA[${i18n("tds.db.userChart.btn.mgr")}]]></value>
					</property>
					<property name="rightCode" value="IDR_ORG_MANAGE" />
					<property name="body" ref="buttonBody" />
					<property name="onClick">
						<value><![CDATA[window.open('${ctx}/admin/organization/forwardOrganizationMain.do','_blank');]]></value>
					</property>
					<property name="type" value="btn-success" />
				</bean>
				<bean class="com.tisson.tds.dashboard.web.vo.DropdownMenu">
					<property name="title">
						<value><![CDATA[${i18n("tds.db.userChart.btn.more")}]]></value>
					</property>
					<property name="body" ref="dropdownMenuBody" />
					<property name="menus">
						<list>
							<bean class="com.tisson.tds.dashboard.web.vo.Menu">
								<property name="title">
									<value><![CDATA[${i18n("tds.db.userChart.btn.rightgroup")}]]></value>
								</property>
								<property name="rightCode" value="IDR_DATA_AUTHORITY" />
								<property name="body" ref="menuBody" />
								<property name="onClick">
									<value><![CDATA[window.open('${ctx}/admin/right/group/index.do','_blank');]]></value>
								</property>
							</bean>
						</list>
					</property>
				</bean>
			</list>
		</property>
		<property name="translator">
			<bean class="com.tisson.tds.dashboard.service.DictionaryTranslator">
				<property name="mappers">
					<list>
						<bean class="com.tisson.tds.dashboard.web.vo.DictionaryMapper">
							<property name="dictionaryId" value="userType" />
							<property name="from" value="id" />
							<property name="to" value="name" />
						</bean>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	
	<bean id="lineChartPanelWidget" class="com.tisson.tds.dashboard.web.vo.chart.LineChartPanelWidget" parent="panelWidget" scope="prototype"></bean>
	
	<import resource="monitor-widget.xml" />
	<import resource="sample-widget.xml" />
</beans>
