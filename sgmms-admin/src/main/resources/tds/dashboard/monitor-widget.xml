<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"
	xmlns="http://www.springframework.org/schema/beans">
	
	<bean id="clusterMonitor" class="com.tisson.tds.monitor.web.vo.ClusterWidget"
		parent="panelWidget" scope="prototype">
		<property name="id" value="clusterWidget" />
		<property name="title">
			<value><![CDATA[${i18n("tds.db.clusterMonitor.title")}]]></value>
		</property>
		<property name="sizeX" value="2" />
		<property name="sizeY" value="2" />
		<property name="failImage" value="tds/static/dashboard/monitor/shutdown.png" />
		<property name="succImage" value="tds/static/dashboard/monitor/running.png" />
		<property name="bodyContext">
			<value>
				<![CDATA[
					<table border="0">
						<tbody>
							<tr>
								<td valign="center" style="padding: 12px;"><img src="${ctx}/${image}"></td>
								<td>${text}</td>
							</tr>
						</tbody>
					</table>
				]]>
			</value>
		</property>
		<property name="succText">
			<value>
				<![CDATA[
					<font size="1"><p>已运行时间:</p> </font>
					<p><font size="5">${runningTime}</font></p>
					<font size="1">
						<p>群集名称:${clusterName}</p>
						<p>主节点地址:${masterAddr}</p>
						<p>节点数量:${nodeCount}</p>
						<p>节点列表:${nodeList}</p>
					</font>
				]]>
			</value>
		</property>
		<property name="failText">
			<value>
				<![CDATA[
					<font size="1"><p>错误:</p> </font>
					<p><font size="5">${error}</font></p>
				]]>
			</value>
		</property>
		<property name="headingButtons">
			<list>
				<bean class="com.tisson.tds.dashboard.web.vo.Button">
					<property name="title">
						<value><![CDATA[${i18n("tds.db.clusterMonitor.btn.job")}]]></value>
					</property>
					<property name="body" ref="buttonBody" />
					<property name="onClick">
						<value><![CDATA[window.open('${ctx}/admin/monitor/job.do','_blank');]]></value>
					</property>
					<property name="type" value="btn-success" />
				</bean>
				<bean class="com.tisson.tds.dashboard.web.vo.DropdownMenu">
					<property name="title">
						<value><![CDATA[${i18n("tds.db.userChart.btn.more")}]]></value>
					</property>
					<property name="body" ref="dropdownMenuBody" />
					<property name="menus">
						<list>
							<bean class="com.tisson.tds.dashboard.web.vo.Menu">
								<property name="title">
									<value><![CDATA[${i18n("tds.db.clusterMonitor.btn.pool")}]]></value>
								</property>
								<property name="body" ref="menuBody" />
								<property name="onClick">
									<value><![CDATA[window.open('${ctx}/admin/monitor/pool.do','_blank');]]></value>
								</property>
							</bean>
							<bean class="com.tisson.tds.dashboard.web.vo.Menu">
								<property name="title">
									<value><![CDATA[${i18n("tds.db.clusterMonitor.btn.session")}]]></value>
								</property>
								<property name="body" ref="menuBody" />
								<property name="onClick">
									<value><![CDATA[window.open('${ctx}/admin/monitor/session.do','_blank');]]></value>
								</property>
							</bean>
						</list>
					</property>
				</bean>
			</list>
		</property>
	</bean>
	
	<bean id="JobMonitor" class="com.tisson.tds.monitor.web.vo.JobWidget"
		parent="panelWidget" scope="prototype">
		<property name="id" value="clusterWidget" />
		<property name="title">
			<value><![CDATA[${i18n("tds.db.jobMonitor.title")}]]></value>
		</property>
		<property name="sizeX" value="2" />
		<property name="sizeY" value="2" />
		<property name="failImage" value="tds/static/dashboard/monitor/shutdown.png" />
		<property name="succImage" value="tds/static/dashboard/monitor/running.png" />
		<property name="bodyContext">
			<value>
				<![CDATA[
					<table border="0">
						<tbody>
							<tr>
								<td valign="center" style="padding: 12px;"><img src="${ctx}/${image}"></td>
								<td>
									<font size="1"><p>下次运行时间:</p> </font>
									<p><font size="5">${nextRunTime}</font></p>
									<font size="1">
										<p>运行成功次数:${succCount}</p>
										<p>运行失败次数:${failCount}</p>
									</font>
								</td>
							</tr>
							<tr>
								<td valign="center" colspan="2">
									<font size="1">
										<p>首次运行时间:${firstRunTime}</p>
										<p>上次运行时间:${lastRunTime}</p>
										<p>任务处理类:${className}</p>
										<p>执行周期:${cronExpression}</p>
									</font>
								</td>
							</tr>
						</tbody>
					</table>
				]]>
			</value>
		</property>
	</bean>
	<bean id="sessionMonitor" class="com.tisson.tds.monitor.web.vo.SessionWidget" parent="panelWidget" scope="prototype">
		<property name="id" value="sessionWidget" />
		<property name="title">
			<value><![CDATA[${i18n("tds.db.sessionMonitor.title")}]]></value>
		</property>
		<property name="sizeX" value="1" />
		<property name="sizeY" value="1" />
		<property name="bodyContext">
			<value>
				<![CDATA[
					<table border="0" style="width:100%;border-collapse:separate;border-spacing:10px;text-align:center;">
						<tbody>
							<tr>
								<td><font size="5">${status.sessionCount}</font></td>
								<td><font size="5">${status.loginCount}</font></td>
							</tr>
							<tr>
								<td><font size="1">${i18n("tds.db.sessionMonitor.sessionCountCaption")}</font></td>
								<td><font size="1">${i18n("tds.db.sessionMonitor.loginCountCaption")}</font></td>
							</tr>
						</tbody>
					</table>
				]]>
			</value>
		</property>
	</bean>
	
	<bean id="poolMonitor" class="com.tisson.tds.monitor.web.vo.PoolWidget" parent="panelWidget" scope="prototype">
		<property name="id" value="poolWidget" />
		<property name="title">
			<value><![CDATA[${i18n("tds.db.poolMonitor.title")}]]></value>
		</property>
		<property name="sizeX" value="2" />
		<property name="sizeY" value="2" />
		<property name="failImage" value="tds/static/dashboard/monitor/shutdown.png" />
		<property name="succImage" value="tds/static/dashboard/monitor/running.png" />
		<property name="bodyContext">
			<value>
				<![CDATA[
					<table border="0" style="width:100%;">
						<tbody>
							<tr>
								<td style="padding: 12px;width:50%"><p>连接占用率</p><p><font size="5">${status.usedRate}</font></p></td>
								<td style="padding: 12px;width:50%"><p>队列等待数</p><p><font size="5">${status.waitCount}</font></p></td>
							</tr>
							<tr>
								<td valign="top" colspan="2">
									<table border="0">
										<tbody>
											<tr>
												<td>活动连接:${status.active}</td>
												<td>最大连接:${status.maxActive}</td>
											</tr>
											<tr>
												<td>创建连接:${status.size}</td>
												<td>空闲连接:${status.idle}</td>
											</tr>
											<tr>
												<td colspan="2">队列大小:${status.maxWait}</td>
											</tr>
											<tr>
												<td colspan="2">连接占用率=活动连接/最大连接*100%</td>
											</tr>
										</tbody>
									</table>
								</td>
							</tr>
						</tbody>
					</table>
				]]>
			</value>
		</property>
	</bean>
</beans>
